<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Valentine?</title>

<style>
  * { box-sizing: border-box; font-family: Arial, sans-serif; }
  body {
    margin: 0;
    height: 100vh;
    background: linear-gradient(135deg, #ffd6e8, #fff0f6);
    overflow: hidden;
    display: flex;
    justify-content: center;
    align-items: center;
    transition: background 0.5s ease;
  }
  .container { text-align: center; position: relative; padding: 20px; }
  h1 { font-size: clamp(1.8rem, 5vw, 3rem); color: #c9184a; margin-bottom: 20px; }
  .message { font-size: 1.2rem; color: #9d0208; margin-bottom: 10px; min-height: 30px; }
  .counter { font-size: 0.9rem; color: #6c757d; margin-bottom: 20px; }
  .buttons { position: relative; height: 120px; }
  #yes {
    font-size: clamp(1.2rem, 4vw, 2.2rem);
    padding: 15px 40px;
    background-color: #ff4d6d;
    color: white;
    border: none;
    border-radius: 12px;
    cursor: pointer;
    margin-right: 20px;
    box-shadow: 0 6px 15px rgba(0,0,0,0.15);
    transition: transform 0.2s;
  }
  #no {
    font-size: 0.9rem;
    padding: 6px 12px;
    background-color: #adb5bd;
    color: white;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    position: fixed;
    transition: transform 0.2s;
  }
  #no,#yes { touch-action: manipulation; }
  .yay { display: none; font-size: clamp(2rem,6vw,4rem); color:#ff4d6d; position: relative; }
  .confetti { position: absolute; top:50%; font-size:2.5rem; animation: pop 1.2s infinite ease-in-out; }
  .confetti.left { left: -80px; }
  .confetti.right { right: -80px; }
  @keyframes pop { 0%{transform:scale(1) rotate(0deg);} 50%{transform:scale(1.4) rotate(20deg);} 100%{transform:scale(1) rotate(0deg);} }
  .floating { position: absolute; opacity:0.25; animation: float linear infinite; font-size:1.2rem; }
  @keyframes float { from{transform:translateY(100vh);} to{transform:translateY(-10vh);} }
</style>
</head>
<body>

<div class="container" id="main">
  <h1>Will you be my Valentine? üíñ</h1>
  <div class="message" id="message"></div>
  <div class="counter" id="counter"></div>
  <div class="buttons">
    <button id="yes">Yes</button>
    <button id="no">No</button>
  </div>
</div>

<div class="container yay" id="yayScreen">
  YAAYYY üéâ
  <div class="confetti left">üéâüéä</div>
  <div class="confetti right">üéäüéâ</div>
</div>

<script>
const noBtn = document.getElementById('no');
const yesBtn = document.getElementById('yes');
const main = document.getElementById('main');
const yayScreen = document.getElementById('yayScreen');
const messageEl = document.getElementById('message');
const counterEl = document.getElementById('counter');

let noCount = parseInt(localStorage.getItem("noCount")) || 0;
let dx = 2;
let dy = 2;
let x = 0;
let y = 0;
let maxX = 0;
let maxY = 0;
let impossibleMode = false;
let countdown = null;
let countdownTime = 10;

const wrongMessages = [
  "Are you sure? üòè",
  "You're making a mistake üëÄ",
  "That doesn't feel right ü§®",
  "Hmm... try again üòå",
  "Really? Think again üí≠"
];

const sounds = [
  new Audio("https://www.myinstants.com/media/sounds/cartoon-boing.mp3"),
  new Audio("https://www.myinstants.com/media/sounds/fail-trombone.mp3"),
  new Audio("https://www.myinstants.com/media/sounds/vine-boom.mp3")
];

function playRandomSound(){ const s=sounds[Math.floor(Math.random()*sounds.length)]; s.currentTime=0; s.play(); }
function vibrate(){ if(navigator.vibrate) navigator.vibrate(150); }

function updateBounds(){ maxX = window.innerWidth - noBtn.offsetWidth; maxY = window.innerHeight - noBtn.offsetHeight; }
function initPosition(){ updateBounds(); x=Math.random()*maxX; y=Math.random()*maxY; }

function moveNo(){
  x += dx; y += dy;
  if(x<=0||x>=maxX) dx*=-1;
  if(y<=0||y>=maxY) dy*=-1;
  noBtn.style.left = x+"px";
  noBtn.style.top = y+"px";
  requestAnimationFrame(moveNo);
}

noBtn.addEventListener("click",()=>{
  noCount++;
  localStorage.setItem("noCount",noCount);
  playRandomSound(); vibrate();
  messageEl.textContent=wrongMessages[noCount%wrongMessages.length];
  counterEl.textContent=`You're on your ${noCount}${getOrdinal(noCount)} bad decision üòà`;

  // Shrinking No / Growing Yes
  noBtn.style.transform = `scale(${Math.max(0.5,1-noCount*0.05)})`;
  yesBtn.style.transform = `scale(${1+noCount*0.03})`;

  // Random teleport + spin
  x=Math.random()*maxX; y=Math.random()*maxY;
  noBtn.style.transform += ` rotate(${Math.random()*360}deg)`;

  // Reverse psychology
  if(noCount===5){
    if(Math.random()<0.5){ yesBtn.textContent="No ü§Ø"; noBtn.textContent="Yes üòà"; }
  }

  // Countdown pressure after 5 NOs
  if(noCount===5){
    countdownTime=10;
    countdown = setInterval(()=>{
      document.title=`Hurry! ${countdownTime}s left ‚è∞`;
      countdownTime--;
      if(countdownTime<0){
        clearInterval(countdown);
        document.title="Too late! üòµ";
        spawnChaosParticles(20);
      }
    },1000);
  }

  // Meme madness after 10 NOs
  if(noCount>=10){
    impossibleMode=true;
    spawnChaosParticles(50);
    document.body.style.background=`linear-gradient(${Math.random()*360}deg,#ff4d6d,#ffd6e8,#ffafcc)`;
  }
});

function spawnChaosParticles(num){
  for(let i=0;i<num;i++){
    const el=document.createElement("div");
    el.className="floating";
    const emojis=["üíñ","üî•","üíÄ","üí©","üíã","üçï","ü§£"];
    el.textContent=emojis[Math.floor(Math.random()*emojis.length)];
    el.style.left=Math.random()*100+"vw";
    el.style.fontSize=(1+Math.random()*2)+"rem";
    el.style.animationDuration=(3+Math.random()*5)+"s";
    document.body.appendChild(el);
  }
}

function getOrdinal(n){ if(n%10==1 && n%100!=11) return"st"; if(n%10==2 && n%100!=12) return"nd"; if(n%10==3 && n%100!=13) return"rd"; return"th"; }

yesBtn.addEventListener("click",()=>{
  main.style.display="none"; yayScreen.style.display="block";
  localStorage.removeItem("noCount");

  // Celebration overload
  spawnChaosParticles(50);
  for(let i=0;i<20;i++){
    const conf=document.createElement("div");
    conf.className="confetti";
    conf.style.left=Math.random()*window.innerWidth+"px";
    conf.style.top=Math.random()*window.innerHeight+"px";
    conf.textContent=["üéâ","üéä","‚ú®","üíñ"][Math.floor(Math.random()*4)];
    document.body.appendChild(conf);
  }
  const cheer=new Audio("https://www.myinstants.com/media/sounds/tada-fanfare.mp3");
  cheer.play();
});

window.addEventListener("resize",updateBounds);
initPosition();
moveNo();
</script>

</body>
</html>
