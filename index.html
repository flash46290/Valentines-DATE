<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Valentine?</title>

<style>
  * {
    box-sizing: border-box;
    font-family: Arial, sans-serif;
  }

  body {
    margin: 0;
    height: 100vh;
    background: linear-gradient(135deg, #ffd6e8, #fff0f6);
    overflow: hidden;
    display: flex;
    justify-content: center;
    align-items: center;
  }

  .container {
    text-align: center;
    position: relative;
    padding: 20px;
  }

  h1 {
    font-size: clamp(1.8rem, 5vw, 3rem);
    color: #c9184a;
    margin-bottom: 20px;
  }

  .message {
    font-size: 1.2rem;
    color: #9d0208;
    margin-bottom: 10px;
    min-height: 30px;
  }

  .counter {
    font-size: 0.9rem;
    color: #6c757d;
    margin-bottom: 20px;
  }

  .buttons {
    position: relative;
    height: 120px;
  }

  #yes {
    font-size: clamp(1.2rem, 4vw, 2.2rem);
    padding: 15px 40px;
    background-color: #ff4d6d;
    color: white;
    border: none;
    border-radius: 12px;
    cursor: pointer;
    margin-right: 20px;
    box-shadow: 0 6px 15px rgba(0,0,0,0.15);
  }

  #no {
    font-size: 0.9rem;
    padding: 6px 12px;
    background-color: #adb5bd;
    color: white;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    position: fixed;
  }

  #no, #yes {
    touch-action: manipulation;
  }

  .yay {
    display: none;
    font-size: clamp(2rem, 6vw, 4rem);
    color: #ff4d6d;
    position: relative;
  }

  .confetti {
    position: absolute;
    top: 50%;
    font-size: 2.5rem;
    animation: pop 1.2s infinite ease-in-out;
  }

  .confetti.left { left: -80px; }
  .confetti.right { right: -80px; }

  @keyframes pop {
    0% { transform: scale(1) rotate(0deg); }
    50% { transform: scale(1.4) rotate(20deg); }
    100% { transform: scale(1) rotate(0deg); }
  }

  .floating {
    position: absolute;
    opacity: 0.25;
    animation: float linear infinite;
  }

  @keyframes float {
    from { transform: translateY(100vh); }
    to { transform: translateY(-10vh); }
  }
</style>
</head>
<body>

<div class="container" id="main">
  <h1>Will you be my Valentine? üíñ</h1>
  <div class="message" id="message"></div>
  <div class="counter" id="counter"></div>
  <div class="buttons">
    <button id="yes">Yes</button>
    <button id="no">No</button>
  </div>
</div>

<div class="container yay" id="yayScreen">
  YAAYYY üéâ
  <div class="confetti left">üéâüéä</div>
  <div class="confetti right">üéäüéâ</div>
</div>

<script>
  const noBtn = document.getElementById('no');
  const yesBtn = document.getElementById('yes');
  const main = document.getElementById('main');
  const yayScreen = document.getElementById('yayScreen');
  const messageEl = document.getElementById('message');
  const counterEl = document.getElementById('counter');

  let noCount = parseInt(localStorage.getItem("noCount")) || 0;
  let dx = 1;
  let dy = 1;
  let x = 0;
  let y = 0;
  let maxX = 0;
  let maxY = 0;
  let isPaused = false;
  let impossibleMode = false;

  const wrongMessages = [
    "Are you sure? üòè",
    "You're making a mistake üëÄ",
    "That doesn't feel right ü§®",
    "Hmm... try again üòå",
    "Really? Think again üí≠"
  ];

  /* SOUND EFFECTS */
  const sounds = [
    new Audio("https://www.myinstants.com/media/sounds/cartoon-boing.mp3"),
    new Audio("https://www.myinstants.com/media/sounds/fail-trombone.mp3"),
    new Audio("https://www.myinstants.com/media/sounds/vine-boom.mp3")
  ];

  function playRandomSound() {
    const s = sounds[Math.floor(Math.random() * sounds.length)];
    s.currentTime = 0;
    s.play();
  }

  function vibrate() {
    if (navigator.vibrate) {
      navigator.vibrate(150);
    }
  }

  function updateBounds() {
    maxX = window.innerWidth - noBtn.offsetWidth;
    maxY = window.innerHeight - noBtn.offsetHeight;
  }

  function initPosition() {
    updateBounds();
    x = Math.random() * maxX;
    y = Math.random() * maxY;
  }

  function moveNo() {
    if (!isPaused) {
      x += dx;
      y += dy;

      if (x <= 0 || x >= maxX) dx *= -1;
      if (y <= 0 || y >= maxY) dy *= -1;

      noBtn.style.left = x + "px";
      noBtn.style.top = y + "px";

      if (impossibleMode) {
        if (Math.random() < 0.02) {
          dx = (Math.random() * 8) - 4;
          dy = (Math.random() * 8) - 4;
        }
      }
    }
    requestAnimationFrame(moveNo);
  }

  noBtn.addEventListener("click", () => {
    noCount++;
    localStorage.setItem("noCount", noCount);

    playRandomSound();
    vibrate();

    messageEl.textContent = wrongMessages[noCount % wrongMessages.length];
    counterEl.textContent = `You're on your ${noCount}${getOrdinal(noCount)} bad decision üòà`;

    if (noCount >= 3) startFloatingYes();
    if (noCount >= 10) impossibleMode = true;
  });

  function getOrdinal(n) {
    if (n % 10 == 1 && n % 100 != 11) return "st";
    if (n % 10 == 2 && n % 100 != 12) return "nd";
    if (n % 10 == 3 && n % 100 != 13) return "rd";
    return "th";
  }

  yesBtn.addEventListener("click", () => {
    main.style.display = "none";
    yayScreen.style.display = "block";
    localStorage.removeItem("noCount");
  });

  function startFloatingYes() {
    if (document.querySelectorAll(".floating").length > 0) return;
    for (let i = 0; i < 25; i++) {
      const el = document.createElement("div");
      el.className = "floating";
      el.textContent = "YES";
      el.style.left = Math.random() * 100 + "vw";
      el.style.fontSize = (1 + Math.random() * 1.5) + "rem";
      el.style.animationDuration = (6 + Math.random() * 6) + "s";
      document.body.appendChild(el);
    }
  }

  window.addEventListener("resize", updateBounds);

  initPosition();
  moveNo();
</script>

</body>
</html>
