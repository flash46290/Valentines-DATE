<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Valentine?</title>
<style>
*{box-sizing:border-box;font-family:Arial,sans-serif;margin:0;padding:0;}
body{
  margin:0;
  height:100vh;
  background:linear-gradient(135deg,#ffd6e8,#fff0f6);
  overflow:hidden;
  display:flex;
  justify-content:center;
  align-items:center;
  transition:background 0.5s ease;
}
.container{text-align:center;position:relative;padding:20px;}
h1{font-size:clamp(1.8rem,5vw,3rem);color:#c9184a;margin-bottom:20px;}
.message{font-size:1.2rem;color:#9d0208;margin-bottom:10px;min-height:30px;}
.counter{font-size:0.9rem;color:#6c757d;margin-bottom:20px;}
.countdown{font-size:1rem;color:#d00000;margin-top:10px;}
.buttons{position:relative;height:120px;}
#yes{
  font-size:clamp(1.2rem,4vw,2.2rem);
  padding:15px 40px;
  background-color:#ff4d6d;
  color:white;
  border:none;
  border-radius:12px;
  cursor:pointer;
  margin-right:20px;
  box-shadow:0 6px 15px rgba(0,0,0,0.15);
  transition:transform 0.2s;
}
#no{
  font-size:0.9rem;
  padding:6px 12px;
  background-color:#adb5bd;
  color:white;
  border:none;
  border-radius:8px;
  cursor:pointer;
  position:fixed;
  transition:transform 0.2s;
}
#no,#yes{touch-action:manipulation;}
.yay{display:none;font-size:clamp(2rem,6vw,4rem);color:#ff4d6d;position:relative;}
.confetti{position:absolute;top:50%;font-size:2.5rem;animation:pop 1.2s infinite ease-in-out;}
.confetti.left{left:-80px;}
.confetti.right{right:-80px;}
@keyframes pop{0%{transform:scale(1) rotate(0deg);}50%{transform:scale(1.4) rotate(20deg);}100%{transform:scale(1) rotate(0deg);}}
.floating{position:absolute;opacity:0.25;animation:float linear infinite;font-size:1.2rem;cursor:pointer;pointer-events:auto;}
@keyframes float{from{transform:translateY(100vh);}to{transform:translateY(-10vh);}}
#sheYes{
  position:absolute;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  display:none;
  max-width:80%;
  max-height:80%;
  border-radius:20px;
  box-shadow:0 0 20px rgba(0,0,0,0.3);
  z-index:999;
}
</style>
</head>
<body>

<div class="container" id="main">
  <h1>Will you be my Valentine? üíñ</h1>
  <div class="message" id="message"></div>
  <div class="counter" id="counter"></div>
  <div class="countdown" id="countdown"></div>
  <div class="buttons">
    <button id="yes">Yes</button>
    <button id="no">No</button>
  </div>
</div>

<img id="sheYes" src="https://i.imgur.com/0RmBzYF.png" alt="She said Yes">

<div class="container yay" id="yayScreen">
  YAAYYY üéâ
  <div class="confetti left">üéâüéä</div>
  <div class="confetti right">üéäüéâ</div>
</div>

<script>
const noBtn=document.getElementById('no');
const yesBtn=document.getElementById('yes');
const main=document.getElementById('main');
const yayScreen=document.getElementById('yayScreen');
const messageEl=document.getElementById('message');
const counterEl=document.getElementById('counter');
const countdownEl=document.getElementById('countdown');
const sheYes=document.getElementById('sheYes');

let noCount=parseInt(localStorage.getItem("noCount"))||0;
let swapCount=0;
let dx=2,dy=2,x=0,y=0,maxX=0,maxY=0;
let impossibleMode=false,countdown=null,countdownTime=10;
let reverseActive=false;
let floatingYesSizeFactor=1;

const wrongMessages=["Are you sure? üòè","You're making a mistake üëÄ","That doesn't feel right ü§®","Hmm... try again üòå","Really? Think again üí≠"];
const sounds=[
  new Audio("https://www.myinstants.com/media/sounds/cartoon-boing.mp3"),
  new Audio("https://www.myinstants.com/media/sounds/fail-trombone.mp3"),
  new Audio("https://www.myinstants.com/media/sounds/vine-boom.mp3")
];

function playRandomSound(){ const s=sounds[Math.floor(Math.random()*sounds.length)]; s.currentTime=0;s.play();}
function vibrate(){if(navigator.vibrate) navigator.vibrate(150);}
function updateBounds(){ maxX=window.innerWidth-noBtn.offsetWidth; maxY=window.innerHeight-noBtn.offsetHeight; }
function initPosition(){updateBounds(); x=Math.random()*maxX; y=Math.random()*maxY;}
function moveNo(){ x+=dx; y+=dy; if(x<=0||x>=maxX) dx*=-1; if(y<=0||y>=maxY) dy*=-1; noBtn.style.left=x+"px"; noBtn.style.top=y+"px"; requestAnimationFrame(moveNo);}
function getOrdinal(n){ if(n%10==1&&n%100!=11)return"st"; if(n%10==2&&n%100!=12)return"nd"; if(n%10==3&&n%100!=13)return"rd"; return"th"; }

function spawnChaosParticles(num,emojiList){
  for(let i=0;i<num;i++){
    const el=document.createElement("div");
    el.className="floating";
    el.textContent=emojiList[Math.floor(Math.random()*emojiList.length)];
    el.style.left=Math.random()*100+"vw";
    el.style.fontSize=(1+Math.random()*2)+"rem";
    el.style.animationDuration=(3+Math.random()*5)+"s";
    document.body.appendChild(el);
    if(reverseActive){
      el.addEventListener("click",()=>celebrate());
    }
  }
}

function startFloatingYes(){
  const existing=document.querySelectorAll(".floating.yesFloating");
  if(existing.length>0) return;
  for(let i=0;i<25;i++){
    const el=document.createElement("div");
    el.className="floating yesFloating";
    el.textContent="YES";
    el.style.left=Math.random()*100+"vw";
    el.style.fontSize=`${1+Math.random()*1.5* floatingYesSizeFactor}rem`;
    el.style.animationDuration=(6+Math.random()*6)+"s";
    document.body.appendChild(el);
    el.addEventListener("click",()=>celebrate());
  }
}

function celebrate(){
  document.querySelectorAll(".floating").forEach(el=>el.remove());
  main.style.display="none";
  yayScreen.style.display="block";
  countdownEl.textContent="";
  let confettiInterval=setInterval(()=>{
    for(let i=0;i<20;i++){
      const conf=document.createElement("div");
      conf.className="confetti";
      conf.style.left=Math.random()*window.innerWidth+"px";
      conf.style.top=Math.random()*window.innerHeight+"px";
      conf.textContent=["üéâ","üéä","‚ú®","üíñ"][Math.floor(Math.random()*4)];
      document.body.appendChild(conf);
    }
  },200);

  const cheer=new Audio("https://www.myinstants.com/media/sounds/tada-fanfare.mp3");
  cheer.play();

  setTimeout(()=>{
    clearInterval(confettiInterval);
    sheYes.style.display="block";
  },10000); // celebration for 10 seconds

  localStorage.removeItem("noCount");
}

// NO click logic
noBtn.addEventListener("click",()=>{
  noCount++;
  localStorage.setItem("noCount",noCount);
  playRandomSound();
  vibrate();
  messageEl.textContent=wrongMessages[noCount%wrongMessages.length];
  counterEl.textContent=`You're on your ${noCount}${getOrdinal(noCount)} bad decision üòà`;

  // Shrinking No / Growing Yes
  noBtn.style.transform=`scale(${Math.max(0.5,1-noCount*0.05)}) rotate(${Math.random()*360}deg)`;
  yesBtn.style.transform=`scale(${1+noCount*0.05})`;

  // Teleport + spin
  x=Math.random()*maxX; y=Math.random()*maxY;
  noBtn.style.left=x+"px"; noBtn.style.top=y+"px";

  // Hard swap YES/NO every 3 NO clicks
  swapCount++;
  if(swapCount%3===0){
    [yesBtn.textContent,noBtn.textContent]=[noBtn.textContent,yesBtn.textContent];
    reverseActive=!reverseActive;
    floatingYesSizeFactor=reverseActive?1.5:1;
  }

  // Start countdown after 10 NOs
  if(noCount===10){
    countdownTime=10;
    countdownEl.textContent=`‚è∞ ${countdownTime}s left`;
    countdown=setInterval(()=>{
      countdownTime--;
      countdownEl.textContent=`‚è∞ ${countdownTime}s left`;
      if(countdownTime<0){
        clearInterval(countdown);
        countdownEl.textContent="Too late! üòµ";
        spawnChaosParticles(50,["üíñ","üíã","üíå","üíè","üíû","üíï","üíì","üíó","üíò"]);
        document.body.style.background=`linear-gradient(${Math.random()*360}deg,#ff4d6d,#ffd6e8,#ffafcc)`;
      }
    },1000);
  }

  if(noCount>=3) startFloatingYes();

  if(reverseActive){
    document.querySelectorAll(".yesFloating").forEach(el=>{
      const size=parseFloat(el.style.fontSize)||1;
      el.style.fontSize=`${size*1.05}rem`;
    });
  }
});

yesBtn.addEventListener("click",()=>celebrate());

window.addEventListener("resize",updateBounds);
initPosition();
moveNo();
</script>
</body>
</html>
